
<%= link_to categories_path, :class => "text-white" do %>
  <i class="fas fa-chevron-left text-secondary"><span class="back-btn"> Back</span></i>
<% end %>
<div class="card bg-dark mx-auto mt-5 border-secondary w-75 mx-auto">
  <div class="card-body d-flex p-4">
    <div class="flex-grow-1">
      <h4 class="card-title"><%= @category.title %></h5>
      <p><%= @category.description %></p>
      <%= link_to 'Add Task', new_category_task_path(@category.id), :class => "btn btn-sm btn-secondary", "data-bs-toggle" => "modal", "data-bs-target" => "#taskModal", :remote => true %>
    </div>
    <div class="p-2 text-center">
      <div class="dropdown text-end">
        <button class="btn btn-sm btn-outline-warning" id="dLabel" type="button" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="fas fa-caret-down"></i>
        </button>
        <ul class="dropdown-menu text-small" aria-labelledby="dropdownUser1" style="">
          <li><%= link_to 'Edit', edit_category_path(@category), :class => "dropdown-item", "data-bs-toggle" => "modal", "data-bs-target" => "#exampleModal", remote: true %></li>
          <li><%= link_to 'Delete', category_path(@category), remote: true, method: :delete,
            :class => "dropdown-item", 
            data: {confirm: "Are you sure you want to delete this task?"} %>
          </li>
        </ul>
      </div>
    </div>
  </div> 
</div>
        
<br>

<div class=" w-75 mx-auto">
  <h1>Listing tasks</h1>

<table>
  <tr>
    <th>Title</th>
    <th>Description</th>
    <th>Status</th>
    <th>Category</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @category.tasks.each do |task| %>
  <% if task.persisted? %>
    <tr>
      <td><%= task.title %></td>
      <td><%= task.description %></td>
      <td><%= task.status %></td>
      <td><%= task.category %></td>
      <td><%= link_to 'Show', [task.category, task] %></td>
      <td><%= link_to 'Edit', edit_category_task_path(task.category, task) %></td>
      <td><%= link_to 'Destroy', [task.category, task], method: :delete, data: { confirm: 'Are you sure?' } %></td>
    </tr>
  <% end %>
<% end %>
</table>
</div>

<br />



<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      
    </div>
  </div>
</div>

<div class="modal fade" id="taskModal" tabindex="-1" aria-labelledby="taskModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <%= render 'task_form' %>
    </div>
  </div>
</div>
